{% extends "base.html" %} {% block title %}Dashboard - Agri-SCM{% endblock %} {%
block content %}
<div class="container-fluid mt-4">
  <div class="row">
    <!-- User Profile Card -->
    <div class="col-md-3 mb-4">
      <div class="card h-100">
        <div class="card-header bg-success text-white">
          <h5><i class="fas fa-user-circle me-2"></i>User Profile</h5>
        </div>
        <div class="card-body">
          <div class="text-center mb-3">
            <div class="avatar-circle bg-success text-white">
              {{ user.username[0]|upper }}
            </div>
          </div>
          <div class="user-details">
            <p>
              <strong><i class="fas fa-user me-2"></i>Username:</strong> {{
              user.username }}
            </p>
            <p>
              <strong><i class="fas fa-tag me-2"></i>Role:</strong>
              <span class="badge bg-primary">{{ user.role|capitalize }}</span>
            </p>
            {% if user.role == 'farmer' %}
            <p>
              <strong><i class="fas fa-tractor me-2"></i>Farm Size:</strong> {{
              user.farm_size }} acres
            </p>
            {% endif %}
            <p>
              <strong
                ><i class="fas fa-map-marker-alt me-2"></i>Location:</strong
              >
              {{ user.location }}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Dashboard Content -->
    <div class="col-md-9">
      <div class="card h-100">
        <div class="card-header bg-success text-white">
          <h5>
            <i class="fas fa-tachometer-alt me-2"></i>Agricultural Supply Chain
            Dashboard
          </h5>
        </div>
        <div class="card-body">
          <!-- Farmer Dashboard -->
          {% if user.role == 'farmer' %}
          <div class="farmer-dashboard">
            <h4><i class="fas fa-leaf me-2"></i>Farmer Dashboard</h4>
            <p class="text-muted">
              Manage your crops, view market prices, and connect with
              distributors.
            </p>
            <div class="row mt-4">
              {% set farmer_cards = [ ('crop_inventory', 'Seedling', 'Manage
              your current crops'), ('market_prices', 'Chart-line', 'Current
              market rates'), ('orders', 'Shopping-cart', 'View your orders'),
              ('add_crop', 'Plus-circle', 'Add new crops') ] %} {% for endpoint,
              icon, text in farmer_cards %}
              <div class="col-md-3 mb-4">
                <div class="card h-100 text-center hover-shadow">
                  <div class="card-body">
                    <div class="dashboard-icon text-success">
                      <i class="fas fa-{{ icon }} fa-3x mb-3"></i>
                    </div>
                    <h5>{{ text.split(' ')[0] }}</h5>
                    <p class="text-muted">{{ text }}</p>
                    <a
                      href="{{ url_for(endpoint) }}"
                      class="btn btn-outline-success stretched-link"
                    >
                      View <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>

          <!-- Distributor Dashboard -->
          {% elif user.role == 'distributor' %}
          <div class="distributor-dashboard">
            <h4><i class="fas fa-truck me-2"></i>Distributor Dashboard</h4>
            <p class="text-muted">
              Optimize your supply routes and manage farmer connections.
            </p>
            <div class="row mt-4">
              {% set distributor_cards = [ ('supply_routes', 'Route', 'Optimize
              your routes'), ('farmer_connections', 'Users', 'Manage farmer
              connections'), ('market_prices', 'Chart-line', 'View market
              trends'), ('orders', 'Clipboard-list', 'Order management') ] %} {%
              for endpoint, icon, text in distributor_cards %}
              <div class="col-md-3 mb-4">
                <div class="card h-100 text-center hover-shadow">
                  <div class="card-body">
                    <div class="dashboard-icon text-success">
                      <i class="fas fa-{{ icon }} fa-3x mb-3"></i>
                    </div>
                    <h5>{{ text.split(' ')[0] }}</h5>
                    <p class="text-muted">{{ text }}</p>
                    <a
                      href="{{ url_for(endpoint) }}"
                      class="btn btn-outline-success stretched-link"
                    >
                      View <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>

          <!-- Retailer Dashboard -->
          {% elif user.role == 'retailer' %}
          <div class="retailer-dashboard">
            <h4><i class="fas fa-store me-2"></i>Retailer Dashboard</h4>
            <p class="text-muted">
              Source fresh produce directly from farmers.
            </p>
            <div class="row mt-4">
              {% set retailer_cards = [ ('produce_sourcing', 'Shopping-basket',
              'Source fresh produce'), ('market_prices', 'Chart-line', 'View
              price trends'), ('orders', 'Clipboard-list', 'Order history'),
              ('farmer_connections', 'Users', 'Connect with farmers') ] %} {%
              for endpoint, icon, text in retailer_cards %}
              <div class="col-md-3 mb-4">
                <div class="card h-100 text-center hover-shadow">
                  <div class="card-body">
                    <div class="dashboard-icon text-success">
                      <i class="fas fa-{{ icon }} fa-3x mb-3"></i>
                    </div>
                    <h5>{{ text.split(' ')[0] }}</h5>
                    <p class="text-muted">{{ text }}</p>
                    <a
                      href="{{ url_for(endpoint) }}"
                      class="btn btn-outline-success stretched-link"
                    >
                      View <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .avatar-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: bold;
  }

  .dashboard-icon {
    transition: transform 0.3s;
  }

  .hover-shadow:hover {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    transform: translateY(-5px);
  }

  .hover-shadow:hover .dashboard-icon {
    transform: scale(1.1);
  }

  .stretched-link::after {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1;
    content: "";
  }
</style>
{% endblock %}
